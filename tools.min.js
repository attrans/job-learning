function setLanguage(e) {
    store("language-option", e)
}
function getLanguage() {
    return top.zteFrameworkCurrentLanguage || (top.zteFrameworkCurrentLanguage = $Boot.bootConfig.getLanguage()),
    top.zteFrameworkCurrentLanguage
}
function getTimezoneStatus() {
    var e = localStorage.getItem("isOnTimezone-option");
    return null == e ? (localStorage.setItem("isOnTimezone-option", "off"),
    userSetZone.zoneId = getUserSetTimeZoneId("Default"),
    userSetZone.zoneType = "Default",
    userSetZone.isDst = "",
    setLocalStorageByItem(userSetZone, "timeZone-option"),
    "off") : e
}
function getUserSetTimeZoneType() {
    var e, t = getLocalStorageByItem("timeZone-option");
    return null == t || "null" == t.zoneType || null == t.zoneType || "" == t.zoneType || "Default" == t.zoneType ? (userSetZone.zoneId = getUserSetTimeZoneId("Local"),
    userSetZone.zoneType = "Local",
    userSetZone.isDst = "on",
    setLocalStorageByItem(userSetZone, "timeZone-option"),
    "Local") : ("Default" != t.zoneType && "Local" != t.zoneType || (e = top.getDefaultTimezoneId()) != t.zoneId && (t.zoneId = e,
    setLocalStorageByItem(t, "timeZone-option")),
    "Server" != t.zoneType || (e = JSON.parse(localStorage.getItem("serverTimeZoneID"))) != t.zoneId && (t.zoneId = e,
    setLocalStorageByItem(t, "timeZone-option")),
    t.zoneType)
}
function getLocalStorageByItem(e) {
    e = localStorage.getItem(e);
    return JSON.parse(e)
}
function setLocalStorageByItem(e, t) {
    e = JSON.stringify(e);
    localStorage.setItem(t, e)
}
function getDst() {
    var e = getLocalStorageByItem("timeZone-option");
    return null == e ? null : e.isDst
}
function getUserSetTimeZoneId(e) {
    return "Default" == e || "Local" == e ? top.getDefaultTimezoneId() : "Server" == e ? JSON.parse(localStorage.getItem("serverTimeZoneID")) : "UTC"
}
function getStringWidth(e, t) {
    var r = document.getElementById("_ictframework_getwidth");
    null == r && ((r = document.createElement("span")).id = "_ictframework_getwidth",
    document.body.appendChild(r)),
    r.innerText = e,
    r.style.whiteSpace = "nowrap",
    $("#_ictframework_getwidth").attr("style", "font-size:" + t + "px;");
    r = r.offsetWidth;
    return $("#_ictframework_getwidth").attr("style", "display:none"),
    r
}
function getUrlParam(e) {
    return $Boot.bootConfig.getUrlParam(e)
}
function httpRequest(e, t, r) {
    return $Boot.bootConfig.httpRequestStatic(e, t, r)
}
function modelTip(e, t, r, n) {
    top == window ? (0 == top.$("#frmModal").length && $("body").append('<div class="modal fade" id="frmModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title" id="frmModalTitle">Modal title</h4></div><div class="modal-body"></div><div class="modal-footer"><button type="button" class="btn btn-default" id="frmCancel" data-dismiss="modal">Cancel</button><button type="button" class="btn btn-primary" id="frmConfirm">OK</button></div></div></div></div>'),
    e ? $("#frmModalTitle").text(e) : ($("#frmModalTitle").hide(),
    $("#frmModal .modal-header").css("border-bottom", "0px")),
    $("#frmModal .modal-body").html(otcpHtmlEncode(t)),
    $("#frmModal #frmConfirm").html(otcpHtmlEncode($.i18n.prop("com_zte_ums_ict_sm_user_confirm"))),
    $("#frmModal #frmCancel").html(otcpHtmlEncode($.i18n.prop("com_zte_ums_ict_sm_user_cancel_button"))),
    $("#frmModal").modal({
        keyboard: !1,
        backdrop: !1
    }),
    $("#frmConfirm").one("click", function() {
        r(),
        $("#frmModal").modal("hide")
    }),
    n || $("#frmCancel").hide()) : top.modelTip(e, t, r, n)
}
!function(e) {
    var a = {
        version: "2.3.0",
        areas: {},
        apis: {},
        inherit: function(e, t) {
            for (var r in e)
                t.hasOwnProperty(r) || (t[r] = e[r]);
            return t
        },
        stringify: function(e) {
            return void 0 === e || "function" == typeof e ? e + "" : JSON.stringify(e)
        },
        parse: function(t) {
            try {
                return JSON.parse(t)
            } catch (e) {
                return t
            }
        },
        fn: function(e, t) {
            for (var r in a.storeAPI[e] = t,
            a.apis)
                a.apis[r][e] = t
        },
        get: function(e, t) {
            return e.getItem(t)
        },
        set: function(e, t, r) {
            e.setItem(t, r)
        },
        remove: function(e, t) {
            e.removeItem(t)
        },
        key: function(e, t) {
            return e.key(t)
        },
        length: function(e) {
            return e.length
        },
        clear: function(e) {
            e.clear()
        },
        Store: function(e, t, r) {
            var n = a.inherit(a.storeAPI, function(e, t, r) {
                return 0 === arguments.length ? n.getAll() : void 0 !== t ? n.set(e, t, r) : "string" == typeof e ? n.get(e) : e ? n.setAll(e, t) : n.clear()
            });
            n._id = e;
            try {
                var o = "_safariPrivate_";
                t.setItem(o, "sucks"),
                (n._area = t).removeItem(o)
            } catch (e) {}
            return n._area || (n._area = a.inherit(a.storageAPI, {
                items: {},
                name: "fake"
            })),
            n._ns = r || "",
            a.areas[e] || (a.areas[e] = n._area),
            a.apis[n._ns + n._id] || (a.apis[n._ns + n._id] = n),
            n
        },
        storeAPI: {
            area: function(e, t) {
                var r = this[e];
                return r && r.area || (r = a.Store(e, t, this._ns),
                this[e] || (this[e] = r)),
                r
            },
            namespace: function(e, t) {
                if (!e)
                    return this._ns ? this._ns.substring(0, this._ns.length - 1) : "";
                var r = e
                  , e = this[r];
                return e && e.namespace || (e = a.Store(this._id, this._area, this._ns + r + "."),
                this[r] || (this[r] = e),
                t || e.area("session", a.areas.session)),
                e
            },
            isFake: function() {
                return "fake" === this._area.name
            },
            toString: function() {
                return "store" + (this._ns ? "." + this.namespace() : "") + "[" + this._id + "]"
            },
            has: function(e) {
                return this._area.has ? this._area.has(this._in(e)) : !!(this._in(e)in this._area)
            },
            size: function() {
                return this.keys().length
            },
            each: function(e, t) {
                for (var r = 0, n = a.length(this._area); r < n; r++) {
                    var o = this._out(a.key(this._area, r));
                    if (void 0 !== o && !1 === e.call(this, o, t || this.get(o)))
                        break;
                    n > a.length(this._area) && (n--,
                    r--)
                }
                return t || this
            },
            keys: function() {
                return this.each(function(e, t) {
                    t.push(e)
                }, [])
            },
            get: function(e, t) {
                e = a.get(this._area, this._in(e));
                return null !== e ? a.parse(e) : t || e
            },
            getAll: function() {
                return this.each(function(e, t) {
                    t[e] = this.get(e)
                }, {})
            },
            set: function(e, t, r) {
                var n = this.get(e);
                return null != n && !1 === r ? t : a.set(this._area, this._in(e), a.stringify(t), r) || n
            },
            setAll: function(e, t) {
                var r, n, o;
                for (o in e)
                    n = e[o],
                    this.set(o, n, t) !== n && (r = !0);
                return r
            },
            remove: function(e) {
                var t = this.get(e);
                return a.remove(this._area, this._in(e)),
                t
            },
            clear: function() {
                return this._ns ? this.each(function(e) {
                    a.remove(this._area, this._in(e))
                }, 1) : a.clear(this._area),
                this
            },
            clearAll: function() {
                var e, t = this._area;
                for (e in a.areas)
                    a.areas.hasOwnProperty(e) && (this._area = a.areas[e],
                    this.clear());
                return this._area = t,
                this
            },
            _in: function(e) {
                return "string" != typeof e && (e = a.stringify(e)),
                this._ns ? this._ns + e : e
            },
            _out: function(e) {
                return this._ns ? e && 0 === e.indexOf(this._ns) ? e.substring(this._ns.length) : void 0 : e
            }
        },
        storageAPI: {
            length: 0,
            has: function(e) {
                return this.items.hasOwnProperty(e)
            },
            key: function(e) {
                var t, r = 0;
                for (t in this.items)
                    if (this.has(t) && e === r++)
                        return t
            },
            setItem: function(e, t) {
                this.has(e) || this.length++,
                this.items[e] = t
            },
            removeItem: function(e) {
                this.has(e) && (delete this.items[e],
                this.length--)
            },
            getItem: function(e) {
                return this.has(e) ? this.items[e] : null
            },
            clear: function() {
                for (var e in this.list)
                    this.removeItem(e)
            },
            toString: function() {
                return this.length + " items in " + this.name + "Storage"
            }
        }
    };
    e.store && (a.conflict = e.store);
    var t = a.Store("local", function() {
        try {
            return localStorage
        } catch (e) {}
    }());
    (t.local = t)._ = a,
    t.area("session", function() {
        try {
            return sessionStorage
        } catch (e) {}
    }()),
    e.store = t,
    "undefined" != typeof module && module.exports && (module.exports = t)
}(this),
function(e, g) {
    var w, t, y, s, c, _, v, d, k, r, T = [].indexOf || function(e) {
        for (var t = 0, r = this.length; t < r; t++)
            if (t in this && this[t] === e)
                return t;
        return -1
    }
    , n = e.document, x = "before", b = "after", S = "readyState", L = "addEventListener", o = "removeEventListener", C = "dispatchEvent", z = "XMLHttpRequest", I = ["load", "loadend", "loadstart"], R = ["progress", "abort", "error", "timeout"], $ = parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase()) || [])[1]);
    isNaN($) && ($ = parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase()) || [])[1])),
    (r = Array.prototype).indexOf || (r.indexOf = function(e) {
        for (var t, r = t = 0, n = this.length; t < n; r = ++t)
            if (this[r] === e)
                return r;
        return -1
    }
    ),
    d = function(e, t) {
        return Array.prototype.slice.call(e, t)
    }
    ,
    s = function(e) {
        return "returnValue" === e || "totalSize" === e || "position" === e
    }
    ,
    _ = function(e, t) {
        for (var r in e)
            if (e[r],
            !s(r))
                try {
                    t[r] = e[r]
                } catch (e) {}
        return t
    }
    ,
    v = function(e, a, i) {
        for (var t, r = function(o) {
            return function(e) {
                var t, r, n = {};
                for (t in e)
                    s(t) || (r = e[t],
                    n[t] = r === a ? i : r);
                return i[C](o, n)
            }
        }, n = 0, o = e.length; n < o; n++)
            t = e[n],
            i._has(t) && (a["on" + t] = r(t))
    }
    ,
    c = function(t) {
        var e;
        if (null != n.createEventObject)
            return (e = n.createEventObject()).type = t,
            e;
        try {
            return new Event(t)
        } catch (e) {
            return {
                type: t
            }
        }
    }
    ,
    (k = (w = function(s) {
        var n = {}
          , l = function(e) {
            return n[e] || []
        }
          , u = {
            addEventListener: function(e, t, r) {
                n[e] = l(e),
                0 <= n[e].indexOf(t) || (r = r === g ? n[e].length : r,
                n[e].splice(r, 0, t))
            },
            removeEventListener: function(e, t) {
                e !== g ? (t === g && (n[e] = []),
                -1 !== (t = l(e).indexOf(t)) && l(e).splice(t, 1)) : n = {}
            },
            dispatchEvent: function() {
                var e, t, r, n, o, a = d(arguments), i = a.shift();
                for (s || (a[0] = _(a[0], c(i))),
                (t = u["on" + i]) && t.apply(g, a),
                e = r = 0,
                n = (o = l(i).concat(l("*"))).length; r < n; e = ++r)
                    o[e].apply(g, a)
            },
            _has: function(e) {
                return !(!n[e] && !u["on" + e])
            }
        };
        return s && (u.listeners = function(e) {
            return d(l(e))
        }
        ,
        u.on = u[L],
        u.off = u[o],
        u.fire = u[C],
        u.once = function(e, t) {
            var r = function() {
                return u.off(e, r),
                t.apply(null, arguments)
            };
            return u.on(e, r)
        }
        ,
        u.destroy = function() {
            return n = {}
        }
        ),
        u
    }
    )(!0)).EventEmitter = w,
    k[x] = function(e, t) {
        if (e.length < 1 || 2 < e.length)
            throw "invalid hook";
        return k[L](x, e, t)
    }
    ,
    k[b] = function(e, t) {
        if (e.length < 2 || 3 < e.length)
            throw "invalid hook";
        return k[L](b, e, t)
    }
    ,
    k.enable = function() {
        e[z] = t
    }
    ,
    k.disable = function() {
        e[z] = k[z]
    }
    ,
    y = k.headers = function(e, t) {
        var r, n, o, a, i, s, l;
        switch (null == t && (t = {}),
        typeof e) {
        case "object":
            for (n in r = [],
            e)
                a = e[n],
                o = n.toLowerCase(),
                r.push(o + ":\t" + a);
            return r.join("\n");
        case "string":
            for (i = 0,
            s = (r = e.split("\n")).length; i < s; i++)
                l = r[i],
                /([^:]+):\s*(.+)/.test(l) && (o = null != (l = RegExp.$1) ? l.toLowerCase() : void 0,
                l = RegExp.$2,
                null == t[o] && (t[o] = l));
            return t
        }
    }
    ,
    r = e[z],
    k[z] = r,
    t = e[z] = function() {
        var a, t, n, u, e, r, o, c, i, s, d = new k[z], m = {}, l = null, p = void 0, f = void 0, h = void 0;
        return setXhrResponseType = function() {
            u.responseType !== g && null !== u.responseType && (d.responseType = u.responseType)
        }
        ,
        o = function() {
            var e, t, r, n;
            if (h.status = l || d.status,
            -1 === l && $ < 10 || (h.statusText = d.statusText),
            -1 !== l)
                for (e in n = y(d.getAllResponseHeaders()))
                    r = n[e],
                    h.headers[e] || (t = e.toLowerCase(),
                    h.headers[t] = r)
        }
        ,
        r = function() {
            d.responseType && "text" !== d.responseType ? "document" === d.responseType ? (h.xml = d.responseXML,
            h.data = d.responseXML) : "blob" === d.responseType ? h.blob = d.response : h.data = d.response : (h.text = d.responseText,
            h.data = d.responseText),
            checkSmLogout(h.data),
            "responseURL"in d && (h.finalUrl = d.responseURL)
        }
        ,
        s = function() {
            u.status = h.status,
            u.statusText = h.statusText
        }
        ,
        i = function() {
            "text"in h && (u.responseText = h.text),
            "xml"in h && (u.responseXML = h.xml),
            "data"in h && (u.response = h.data),
            "blob"in h && (u.response = h.blob),
            "finalUrl"in h && (u.responseURL = h.finalUrl)
        }
        ,
        n = function(e) {
            for (; a < e && a < 4; )
                u[S] = ++a,
                1 === a && u[C]("loadstart", {}),
                2 === a && s(),
                4 === a && (s(),
                i()),
                u[C]("readystatechange", {}),
                4 === a && t()
        }
        ,
        t = function() {
            p || u[C]("load", {}),
            u[C]("loadend", {}),
            p && (u[S] = 0)
        }
        ,
        a = 0,
        c = function(e) {
            var t, r;
            4 === e ? (t = k.listeners(b),
            (r = function() {
                var e;
                return t.length ? 2 === (e = t.shift()).length ? (e(m, h),
                r()) : 3 === e.length && m.async ? e(m, h, r) : r() : n(4)
            }
            )()) : n(e)
        }
        ,
        u = m.xhr = w(),
        d.onreadystatechange = function(e) {
            try {
                2 === d[S] && o()
            } catch (e) {}
            4 === d[S] && (f = !1,
            o(),
            r()),
            c(d[S])
        }
        ,
        e = function() {
            p = !0
        }
        ,
        u[L]("error", e),
        u[L]("timeout", e),
        u[L]("abort", e),
        u[L]("progress", function() {
            a < 3 ? c(3) : u[C]("readystatechange", {})
        }),
        ("withCredentials"in d || k.addWithCredentials) && (u.withCredentials = !1),
        u.status = 0,
        u.open = function(e, t, r, n, o) {
            a = 0,
            f = p = !1,
            m.headers = {},
            m.headerNames = {},
            m.status = 0,
            h = {
                headers: {}
            },
            m.method = e,
            m.url = t,
            m.async = !1 !== r,
            m.async && (u.responseType = d.responseType !== g && null !== d.responseType ? d.responseType : void 0),
            m.user = n,
            m.pass = o,
            c(1)
        }
        ,
        u.send = function(e) {
            var r, i, s, n, o, t, a, l = ["type", "timeout", "withCredentials"];
            for (-1 != navigator.userAgent.indexOf("Firefox/") && (l = ["type", "timeout"]),
            t = 0,
            a = l.length; t < a; t++)
                i = l[t],
                (s = "type" === i ? "responseType" : i)in u && (m[i] = u[s]);
            m.body = e,
            o = function() {
                var e, t, r, n, o, a;
                for (v(R, d, u),
                u.upload && v(R.concat(I), d.upload, u.upload),
                f = !0,
                d.open(m.method, m.url, m.async, m.user, m.pass),
                m.async && setXhrResponseType(),
                o = ["type", "timeout", "withCredentials"],
                -1 != navigator.userAgent.indexOf("Firefox/") && (o = ["type", "timeout"]),
                r = 0,
                n = o.length; r < n; r++)
                    i = o[r],
                    s = "type" === i ? "responseType" : i,
                    i in m && (d[s] = m[i]);
                for (e in a = m.headers)
                    t = a[e],
                    d.setRequestHeader(e, t);
                d.send(m.body)
            }
            ,
            r = k.listeners(x),
            (n = function() {
                var e, t;
                return r.length ? ((e = function(e) {
                    if ("object" == typeof e && ("number" == typeof e.status || "number" == typeof h.status))
                        return _(e, h),
                        T.call(e, "data") < 0 && (e.data = e.response || e.text),
                        void c(4);
                    n()
                }
                ).head = function(e) {
                    return _(e, h),
                    c(2)
                }
                ,
                e.progress = function(e) {
                    return _(e, h),
                    c(3)
                }
                ,
                1 === (t = r.shift()).length ? e(t(m)) : 2 === t.length && m.async ? t(m, e) : e()) : o()
            }
            )()
        }
        ,
        u.abort = function() {
            l = -1,
            f ? d.abort() : u[C]("abort", {})
        }
        ,
        u.setRequestHeader = function(e, t) {
            var r = null != e ? e.toLowerCase() : void 0
              , e = m.headerNames[r] = m.headerNames[r] || e;
            m.headers[e] && (t = m.headers[e] + ", " + t),
            m.headers[e] = t
        }
        ,
        u.getResponseHeader = function(e) {
            e = null != e ? e.toLowerCase() : void 0;
            return h.headers[e]
        }
        ,
        u.getAllResponseHeaders = function() {
            return y(h.headers)
        }
        ,
        d.overrideMimeType && (u.overrideMimeType = function() {
            return d.overrideMimeType.apply(d, arguments)
        }
        ),
        d.upload && (u.upload = m.upload = w()),
        u
    }
    ,
    (this.exports || this).xhook = k
}
.call(this, window),
xhook.before(function(e) {
    var t = store("zte_http_headers");
    if (t && 0 < t.length)
        for (i = 0; i < t.length; i++)
            !0 === t[i].store ? store(t[i].value) && (e.headers[t[i].key] = escape(store(t[i].value))) : e.headers[t[i].key] = escape(t[i].value);
    null !== top.getLanguage && void 0 !== top.getLanguage ? e.headers["language-option"] = top.getLanguage() : e.headers["language-option"] = "",
    e.headers["X-Requested-With"] = "XMLHttpRequest";
    var r = null;
    navigator.cookieEnabled && (r = localStorage.getItem("timeZone-option")),
    null != r && (n = (n = JSON.parse(r)).zoneType + "," + n.zoneId + "," + n.isDst,
    e.headers.timeZoneInfo = n);
    var n = store("csrftoken");
    n && checkNeedCsrf(e.url) && (e.headers.forgerydefense = n)
}),
$Boot = {
    createNamespace: function(e, t) {
        for (var r = e.split("."), n = window, o = r[0], a = 0, i = r.length - 1; a < i; o = r[++a])
            n = n[o] || (n[o] = {});
        return n[o] = t,
        o
    },
    isDefined: function(e) {
        return void 0 !== e
    },
    Config: function() {
        function e(e) {
            return void 0 !== e
        }
        e(window.$userAppDir) || (window.$userAppDir = "./"),
        e(window.$userFrameDir) || (window.$userFrameDir = "/common/"),
        e(window.$userI18nDir) || (window.$userI18nDir = "./");
        function a() {
            if (window.ActiveXObject)
                return new ActiveXObject("Microsoft.XMLHTTP");
            if (window.XMLHttpRequest)
                return new XMLHttpRequest;
            throw new Error("This Brower do not support XMLHTTP!!")
        }
        this.httpRequestStatic = function(e, t, r) {
            var n = a()
              , o = null;
            if ("get" == e ? t = t + "?" + r : "post" == e && (o = r),
            n.open(e, t, !1),
            n.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8"),
            n.setRequestHeader("If-Modified-Since", "0"),
            n.send(o),
            200 == n.status)
                return n.responseText
        }
        ,
        this.getLanguage = function() {
            if (!navigator.cookieEnabled)
                return "zh-CN";
            var e = localStorage.getItem("language-option");
            return "null" != e && null != e || (e = window.navigator.userLanguage || window.navigator.language),
            '"zh-CN"' == e || "zh-CN" == e ? "zh-CN" : "en-US"
        }
        ,
        this.getUrlParam = function(e) {
            e = new RegExp("(^|&)" + e + "=([^&]*)(&|$)"),
            e = decodeURIComponent(location.search.substring(1)).match(e);
            return null != e ? unescape(e[2]) : null
        }
    }
},
$Boot.createNamespace("com.zte.ums.aos.framework.BootConfig", $Boot.Config),
$Boot.bootConfig = new com.zte.ums.aos.framework.BootConfig;
var alertLevel = "alert-error";
function showTipBox(e, t) {
    hideTipBox(),
    0 == e ? alertLevel = "alert-error" : 1 == e ? alertLevel = "alert-warning" : 2 == e ? alertLevel = "alert-notice" : 3 == e && (alertLevel = "alert-success"),
    $("#frmTipBox").addClass(alertLevel),
    $("#frmTipBox").addClass("in"),
    $("#frmTipBox").addClass("frmTipBoxTransition"),
    $("#com_zte_ums_ict_portal_frame_tip").html(otcpHtmlEncode(t)),
    2 < e && setTimeout(function() {
        hideTipBox()
    }, 3e3)
}
function hideTipBox() {
    $("#frmTipBox").removeClass("frmTipBoxTransition"),
    $("#frmTipBox").removeClass("in"),
    $("#frmTipBox").removeClass(alertLevel),
    $("#com_zte_ums_ict_portal_frame_tip").html("")
}
function hideTipBoxNew(e) {
    $("#" + e).remove()
}
function generateUUID() {
    var r = (new Date).getTime();
    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(e) {
        var t = (r + 16 * Math.random()) % 16 | 0;
        return r = Math.floor(r / 16),
        ("x" == e ? t : 3 & t | 8).toString(16)
    })
}
function deleteSomeLevelAndMessageDom(e, t) {
    for (var r = $(".iui-message-item"), n = 0, o = r.length; n < o; n++) {
        var a = $(r[n])
          , i = a.find(".iui-message-content").html()
          , s = a.data("level");
        t == i && s == e && a.remove()
    }
}
function isFireFox() {
    var e = navigator.userAgent.toLowerCase();
    return /mozilla/.test(e) && !/(compatible|webkit)/.test(e)
}
function isIE() {
    return !!(window.ActiveXObject || "ActiveXObject"in window)
}
function checkSmLogout(e) {
    try {
        if (e) {
            var t, r = e;
            try {
                "string" == typeof e && (r = $.parseJSON(e))
            } catch (e) {
                console.log("response.data can not turn to object!")
            }
            r.source && r.redirect_uri && "smagent" === r.source && (t = r.redirect_uri,
            (r.hasLogged ? alertSmLogoutReason : gotoSmloginPage)(t))
        }
    } catch (e) {
        window.console.log(e)
    }
}
var hasAlertLogoutReason = !1;
function alertSmLogoutReason(i) {
    top && self != top && null != top.alertSmLogoutReason ? top.alertSmLogoutReason(i) : hasAlertLogoutReason || (hasAlertLogoutReason = !0,
    $.ajax({
        type: "GET",
        cache: !1,
        async: !1,
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        url: "/api/oauth2/v1/zhuxiao/reason",
        success: function(e) {
            var t = e.reloginTitle || $.i18n.prop("com_zte_ums_ict_framework_ui_confirmlogout_relogin_title")
              , r = e.reloginConfirm || $.i18n.prop("com_zte_ums_ict_framework_ui_confirmlogout_relogin_confirm")
              , n = e.reloginReason || $.i18n.prop("com_zte_ums_ict_framework_ui_confirmlogout_relogin")
              , o = e.reasonI18n;
            if (o) {
                o = otcpHtmlEncode(o);
                try {
                    bootbox.confirm({
                        backdrop: !0,
                        title: t,
                        buttons: {
                            confirm: {
                                label: r,
                                className: "blue1"
                            },
                            cancel: {
                                label: $.i18n.prop("com_zte_ums_ict_framework_ui_confirmlogout_relogin_cancel"),
                                className: "hide"
                            }
                        },
                        message: "<i class='warn-icon plx-ico-dialog-risk-48'></i><span class='infos'><span class='title'>" + n + "</span><br/><span class='info'>" + o + "</span></span>",
                        callback: function(e) {
                            hasAlertLogoutReason = !1,
                            gotoSmloginPage(i)
                        }
                    });
                    var a = ($(document).height() - 207) / 2;
                    $(".bootbox-confirm .modal-dialog").css({
                        "margin-top": a + "px"
                    })
                } catch (e) {
                    hasAlertLogoutReason = !1,
                    gotoSmloginPage(i)
                }
            } else
                hasAlertLogoutReason = !1,
                gotoSmloginPage(i)
        },
        error: function(e, t, r) {
            hasAlertLogoutReason = !1,
            gotoSmloginPage(i)
        }
    }))
}
function gotoSmloginPage(e) {
    var t = (top || window).location
      , r = t.pathname;
    0 < t.href.indexOf("thirdsso=true") && (r += t.search,
    r += t.hash,
    r = encodeURIComponent(r));
    t = store("logoutRedirectUrl");
    "undefined" != typeof FrameConst && FrameConst.isLogoutRedirect && t && 0 < t.length && (r = t);
    r = "/api/oauth2/v1/authorize?scope=user.login&response_type=code&redirect_uri=" + r;
    top ? redirectToUrl(top.location, r) : redirectToUrl(window.location, r)
}
function getAllOperCodeRights(o) {
    var a = new Array
      , e = {
        operations: o
    };
    return $.ajax({
        async: !1,
        type: "POST",
        url: "/api/oauth2/v1/perms/user/operations",
        data: JSON.stringify(e),
        contentType: "application/json; charset=utf-8",
        success: function(e) {
            for (var t = e.operations, r = o.length, n = (store("username"),
            0); n < r; n++)
                -1 < t.indexOf(o[n]) ? a.push(!0) : a.push(!1)
        },
        error: function(e, t, r) {}
    }),
    {
        opCodes: o,
        rights: a
    }
}
function hasRight(e, t) {
    for (var r = 0; r < t.opCodes.length; r++)
        if (t.opCodes[r] == e)
            return 1 == t.rights[r];
    return !1
}
window.jQuery && $.ajaxSetup({
    complete: function(e, t) {
        401 == e.status && checkSmLogout(e.responseText)
    }
});
var userSetZone = {
    zoneType: "",
    zoneId: "",
    isDst: ""
};
function getUserName() {
    var a, e = store("username");
    return e || ($.ajax({
        url: "/api/oauth2/v1/username",
        type: "GET",
        async: !1,
        dataType: "text",
        contentType: "application/json; charset=utf-8",
        success: function(e, t, r) {
            var n, o = !1;
            try {
                !e || (n = $.parseJSON(e)).source && n.redirect_uri && "smagent" === n.source && (o = !0)
            } catch (e) {}
            o || (a = e)
        }
    }),
    a)
}
function getDisplayTime(e, t, r) {
    var n = "YYYY-MM-DDTHH:mm:ss";
    "" != r && null != r && null != r && (n = r);
    var o = new Date(e);
    if (null == top.ZteFrameWork)
        return o.Format(n.replace("T", " "));
    var a = getLocalStorageByItem("timeZone-option");
    if ("" == t || null == t || null == t) {
        if (!a)
            return o.Format(n.replace("T", " "));
        t = a.zoneId
    }
    o = top.getTimeWithDst(e, t, r),
    r = top.getTimeWithoutDst(e, t, r);
    return "Default" == a.zoneType ? o.substr(0, n.length).replace("T", " ") : "UTC" == a.zoneType ? "off" == a.isDst ? r.substr(0, n.length) + "Z" : o : "off" == a.isDst ? r : o
}
function formatTimeZoneOffset(e) {
    var t = 60 * Math.abs(e)
      , r = parseInt(t / 60)
      , n = t % 60
      , t = ""
      , t = r < 10 ? t + "0" + r + ":" : t + r + ":";
    return 0 == n ? t += "00" : n < 10 && 0 < n ? t = t + "0" + n : t += n,
    t = 0 <= e ? "+" + t : "-" + t
}
function getGMTTime(e, t) {
    var r = e.replace(" ", "T");
    if (null == top.ZteFrameWork)
        return Date.parse(r);
    if (e.length > "YYYY-MM-DDTHH:mm:ss".length)
        return Date.parse(r);
    var n = getLocalStorageByItem("timeZone-option");
    if ("" == t || null == t || null == t) {
        if (!n)
            return Date.parse(r);
        t = n.zoneId
    }
    e = top.getYearByMoment(r, t);
    if ("off" != n.isDst)
        return 2030 < e && "function" == typeof top.getSpacetimeObject ? top.getSpacetimeObject(r, t).epoch : top.getZoneobjectByDateAndTimezoneId(r, t).valueOf();
    t = r + formatTimeZoneOffset(top.getDefaultTimezoneOffset(e, t) / 60);
    return Date.parse(t)
}
function getTimeZoneId() {
    var e = getLocalStorageByItem("timeZone-option");
    return null == e ? null : e.zoneId
}
function getTimeZoneType() {
    var e = getLocalStorageByItem("timeZone-option");
    return null == e ? null : e.zoneType
}
function getLocalTimezoneId() {
    if (null != top.ZteFrameWork)
        return top.getDefaultTimezoneId()
}
function gotoAngular2Route(e) {
    console.log("window.angularComponent------" + window.angularComponent),
    window.angularComponent && window.angularComponent.component && (console.log("Call routing change ---" + e),
    window.angularComponent.zone.run(function() {
        window.angularComponent.component.routing && (window.angularComponent.component.routing.isActive(e) && window.angularComponent.reloadRoute ? window.angularComponent.reloadRoute(e) : window.angularComponent.component.routing.navigateByUrl(e, {
            skipLocationChange: !0
        }))
    }))
}
function getActiveMenuName() {
    return null == top.ZteFrameWork ? "" : top.ZteFrameWork.getActiveMenuName()
}
function addWaterprint(e) {
    var t, r, n = document.getElementById("wm_div_id");
    n ? n.shadowRoot && (shadowRoot = n.shadowRoot) : ((n = document.createElement("div")).id = "wm_div_id",
    n.style.pointerEvents = "none",
    n.style.webkitUserSelect = "none",
    n.style.mozUserSelect = "none",
    n.style.msUserSelect = "none",
    n.style.khtmlUserSelect = "none",
    n.style.userSelect = "none",
    shadowRoot = "function" == typeof n.createShadowRoot ? n.createShadowRoot() : n,
    (t = document.body.children)[r = Math.floor(Math.random() * (t.length - 1))] ? document.body.insertBefore(n, t[r]) : document.body.appendChild(n));
    n = document.createElement("div");
    n.innerHTML = e.watermark_txt,
    n.id = "wm_div_id00",
    n.style.webkitTransform = "rotate(-" + e.watermark_angle + "deg)",
    n.style.MozTransform = "rotate(-" + e.watermark_angle + "deg)",
    n.style.msTransform = "rotate(-" + e.watermark_angle + "deg)",
    n.style.OTransform = "rotate(-" + e.watermark_angle + "deg)",
    n.style.transform = "rotate(-" + e.watermark_angle + "deg)",
    n.style.visibility = "",
    n.style.position = "absolute",
    n.style.overflow = "hidden",
    n.style.zIndex = "9999",
    n.style.opacity = e.watermark_alpha,
    n.style.filter = "progid:DXImageTransform.Microsoft.Alpha(Opacity=" + 100 * e.watermark_alpha + ")",
    n.style.fontSize = e.watermark_fontsize,
    n.style.fontFamily = e.watermark_font,
    n.style.color = e.watermark_color,
    n.style.textAlign = "center",
    n.style.width = e.watermark_width + "px",
    n.style.minHeight = e.watermark_height + "px",
    n.style.display = "block",
    n.style.wordBreak = "break-all",
    shadowRoot.appendChild(n)
}
function getWaterInfo() {
    var i;
    customAjax({
        dataType: "json",
        type: "GET",
        async: !0,
        url: "/api/oauth2/v1/waterprintinfo",
        success: function(e) {
            if ((i = e) && i.display) {
                for (var t = i.info, r = "", n = 0; n < t.length; n++)
                    r += otcpHtmlEncode(t[n]),
                    n != t.length - 1 && (r += "<br/>");
                addWaterprint({
                    watermark_txt: r,
                    watermark_x: 20,
                    watermark_y: 50,
                    watermark_x_space: 12,
                    watermark_y_space: 12,
                    watermark_fontsize: "19px",
                    watermark_alpha: .085,
                    watermark_width: 180,
                    watermark_height: 80,
                    watermark_angle: 30
                });
                var o = document.querySelector("#wm_div_id")
                  , a = 80;
                o && (!(e = o.shadowRoot) || (e = e.children) && 0 < e.length && (a = e[0].scrollHeight),
                o.remove()),
                setTimeout(function() {
                    var e = {
                        watermark_txt: r,
                        watermark_x: 20,
                        watermark_y: 50,
                        watermark_x_space: 12,
                        watermark_y_space: 50,
                        watermark_fontsize: "19px",
                        watermark_alpha: .085,
                        watermark_width: 180,
                        watermark_height: a,
                        watermark_angle: 30
                    };
                    watermark.init(e),
                    watermark.load(e),
                    watermark.settings = e
                }, 500)
            }
        }
    })
}
function checkNeedCsrf(e) {
    if (!e)
        return !1;
    var t = e;
    return 0 < e.indexOf("?") && (t = e.substring(0, e.indexOf("?"))),
    !(t.startsWith("/iui/") || t.endsWith(".properties") || t.endsWith(".json") || t.endsWith(".html")) && !(0 <= e.indexOf("appRes/themes/themes_config.json") || 0 <= e.indexOf("i18n/web-framework-integration-i18n-zh-CN.properties") || 0 <= e.indexOf("i18n/web-framework-integration-i18n-en-US.properties"))
}
function getCsrfUrl(e) {
    if (!checkNeedCsrf(e))
        return e;
    var t = store("csrftoken");
    return t ? (0 <= e.indexOf("?") ? e += "&" : e += "?",
    e = e + "forgerydefense=" + t) : e
}
function redirectToUrl(e, t) {
    e && (e.href = t)
}
function otcpHtmlEncode(e) {
    return e = (e = $("<div/>").text(e).html()).replace(/'/g, "&#39;").replace(/"/g, "&quot;")
}
Date.prototype.Format = function(e) {
    var t, r = {
        "M+": this.getMonth() + 1,
        "D+": this.getDate(),
        "H+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        S: this.getMilliseconds()
    };
    for (t in /(Y+)/.test(e) && (e = e.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length))),
    r)
        new RegExp("(" + t + ")").test(e) && (e = e.replace(RegExp.$1, 1 == RegExp.$1.length ? r[t] : ("00" + r[t]).substr(("" + r[t]).length)));
    return e
}
,
window.gotoAngular1Route = function(e) {
    console.log("angular.element(#wrap).scope()-----" + angular.element("#wrap").scope()),
    e && angular && angular.element("#wrap") && angular.element("#wrap").scope() && angular.element("#wrap").scope().go(e)
}
,
function(r) {
    window.watermarkdivs = [];
    function n(e) {
        var t = {
            watermark_id: "wm_div_id",
            watermark_txt: "测试水印",
            watermark_x: 20,
            watermark_y: 20,
            watermark_rows: 0,
            watermark_cols: 0,
            watermark_x_space: 100,
            watermark_y_space: 50,
            watermark_font: "微软雅黑",
            watermark_color: "black",
            watermark_fontsize: "18px",
            watermark_alpha: .15,
            watermark_width: 150,
            watermark_height: 100,
            watermark_angle: 15
        };
        if (1 === arguments.length && "object" == typeof e) {
            var r = e || {};
            for (key in r)
                r[key] && t[key] && r[key] === t[key] || r[key] && (t[key] = r[key])
        }
        var n = document.getElementById(t.watermark_id);
        !n || (a = n.parentNode) && a.removeChild(n);
        var o = Math.max(document.body.getBoundingClientRect().width, document.documentElement.getBoundingClientRect().width) - 30;
        window.parent.ZteFrameWork && (o = top.document.querySelector(".page-content-body").getBoundingClientRect().width - 30);
        var a, i, s, l = Math.max(document.body.getBoundingClientRect().height, document.documentElement.getBoundingClientRect().height) - 30, u = "function" == typeof document.createShadowRoot, c = document.getElementById(t.watermark_id);
        c ? c.shadowRoot && (shadowRoot = c.shadowRoot) : ((c = document.createElement("div")).id = t.watermark_id,
        c.style.pointerEvents = "none",
        c.style.webkitUserSelect = "none",
        c.style.mozUserSelect = "none",
        c.style.msUserSelect = "none",
        c.style.khtmlUserSelect = "none",
        c.style.userSelect = "none",
        shadowRoot = "function" == typeof c.createShadowRoot ? c.createShadowRoot() : c,
        (a = document.body.children)[n = Math.floor(Math.random() * (a.length - 1))] ? document.body.insertBefore(c, a[n]) : document.body.appendChild(c)),
        (0 == t.watermark_cols || parseInt(t.watermark_x + t.watermark_width * t.watermark_cols + t.watermark_x_space * (t.watermark_cols - 1)) > o) && (t.watermark_cols = parseInt((o - t.watermark_x + t.watermark_x_space) / (t.watermark_width + t.watermark_x_space)),
        1 == t.watermark_cols ? t.watermark_x_space = 0 : t.watermark_x_space = parseInt((o - t.watermark_x - t.watermark_width * t.watermark_cols) / (t.watermark_cols - 1))),
        (0 == t.watermark_rows || parseInt(t.watermark_y + t.watermark_height * t.watermark_rows + t.watermark_y_space * (t.watermark_rows - 1)) > l) && (t.watermark_rows = parseInt((t.watermark_y_space + l - t.watermark_y) / (t.watermark_height + t.watermark_y_space)),
        0 == t.watermark_rows && (t.watermark_rows = 1),
        1 == t.watermark_rows && (t.watermark_y_space = 0));
        for (var d = 0; d < t.watermark_rows; d++) {
            s = t.watermark_y + (t.watermark_y_space + t.watermark_height) * d;
            for (var m = 0; m < t.watermark_cols; m++) {
                i = t.watermark_x + (t.watermark_width + t.watermark_x_space) * m;
                var p = document.createElement("div");
                p.innerHTML = t.watermark_txt,
                p.id = t.watermark_id + d + m,
                p.style.webkitTransform = "rotate(-" + t.watermark_angle + "deg)",
                p.style.MozTransform = "rotate(-" + t.watermark_angle + "deg)",
                p.style.msTransform = "rotate(-" + t.watermark_angle + "deg)",
                p.style.OTransform = "rotate(-" + t.watermark_angle + "deg)",
                p.style.transform = "rotate(-" + t.watermark_angle + "deg)",
                p.style.visibility = "",
                p.style.position = "absolute",
                p.style.left = i + "px",
                p.style.top = s + "px",
                p.style.overflow = "hidden",
                p.style.zIndex = "9999",
                p.style.opacity = t.watermark_alpha,
                p.style.filter = "progid:DXImageTransform.Microsoft.Alpha(Opacity=" + 100 * t.watermark_alpha + ")",
                p.style.fontSize = t.watermark_fontsize,
                p.style.fontFamily = t.watermark_font,
                p.style.color = t.watermark_color,
                p.style.textAlign = "center",
                p.style.width = t.watermark_width + "px",
                p.style.height = t.watermark_height + "px",
                p.style.display = "block",
                p.style.wordBreak = "break-all",
                u || (p.onclick = function() {
                    var e = f(document, event.clientX, event.clientY, 0, 0);
                    if (null != e)
                        switch (e.nodeName) {
                        case "A":
                            e.click();
                            break;
                        case "SELECT":
                        case "TEXTAREA":
                            e.focus();
                            break;
                        case "INPUT":
                            switch (e.getAttribute("type").toLowerCase()) {
                            case "radio":
                            case "checkbox":
                            case "button":
                            case "submit":
                            case "reset":
                            case "file":
                                e.click();
                                break;
                            default:
                                e.focus()
                            }
                        }
                }
                ),
                shadowRoot.appendChild(p)
            }
        }
    }
    function c(e, t, r, n, o, a) {
        for (var i = t.getElementsByTagName(e), s = 0, l = i.length; s < l; s++) {
            var u = i[s].getBoundingClientRect()
              , c = u.left + o
              , d = u.top + a
              , m = u.width || i[s].offsetWidth
              , u = u.height || i[s].clientHeight;
            if (c <= r && r <= c + m && d <= n && n <= d + u)
                return i[s]
        }
        return null
    }
    function o(e) {
        return top.ZteFrameWork && top.ZteFrameWork.getTheme && "dark" === top.ZteFrameWork.getTheme().style ? (e.watermark_color = "#fff",
        e.watermark_alpha = "0.05") : (e.watermark_color = "#000",
        e.watermark_alpha = "0.085"),
        e
    }
    var f = function(e, t, r, n, o) {
        var a = c("input", e, t, r, n, o);
        if (null != a)
            return a;
        if (null != (a = c("textarea", e, t, r, n, o)))
            return a;
        if (null != (a = c("select", e, t, r, n, o)))
            return a;
        if (null != (a = c("a", e, t, r, n, o)))
            return a;
        for (var i = e.getElementsByTagName("iframe"), s = 0, l = i.length; s < l; s++) {
            var u = i[s].getBoundingClientRect();
            vfleft = n + u.left,
            vftop = o + u.top;
            u = i[s].contentDocument || i[s].contentWindow.document,
            u = f(u, t, r, vfleft, vftop);
            if (null != u)
                return u
        }
        return null
    };
    r.init = function(t) {
        t = o(t);
        try {
            $("body").bind("resize", function() {
                n(t)
            }),
            window.addEventListener("resize", function() {
                n(t)
            }),
            window.addEventListener("DOMContentLoaded", function() {
                n(t)
            })
        } catch (e) {
            n(t)
        }
    }
    ,
    r.load = function(e) {
        e = o(e),
        n(e)
    }
    ,
    window.addEventListener("storage", function(e) {
        var t = "";
        top.ZteFrameWork && top.ZteFrameWork.getThemeKey && (t = top.ZteFrameWork.getThemeKey()),
        t && e.key === t && (t = o(r.settings),
        n(t))
    })
}(window.watermark = {}),
window.onload = function() {
    var i, t, r, n, o;
    i = jQuery,
    t = this,
    "undefined" == typeof FrameConst && (r = i([]),
    (o = i.resize = i.extend(i.resize, {})).delay = 250,
    o.throttleWindow = !0,
    i.event.special.resize = {
        add: function(e) {
            return !(!o.throttleWindow && this.setTimeout) && (i.isFunction(e) ? (a = e,
            t) : (a = e.handler,
            void (e.handler = t)));
            var a;
            function t(e, t, r) {
                var n = i(this)
                  , o = i.data(this, "resize-special-event");
                o && (o.width = void 0 !== t ? t : n.width(),
                o.height = void 0 !== r ? r : n.height()),
                a.apply(this, arguments)
            }
        },
        teardown: function() {
            if (!o.throttleWindow && this.setTimeout)
                return !1;
            var e = i(this);
            r = r.not(e),
            e.removeData("resize-special-event"),
            r.length || clearTimeout(n)
        },
        setup: function() {
            if (!o.throttleWindow && this.setTimeout)
                return !1;
            var e = i(this);
            r = r.add(e),
            i.data(this, "resize-special-event", {
                width: e.width(),
                height: e.height()
            }),
            1 === r.length && function e() {
                n = t.setTimeout(function() {
                    r.each(function() {
                        var e = i(this)
                          , t = e.width()
                          , r = e.height()
                          , n = i.data(this, "resize-special-event");
                        !n || t === n.width && r === n.height || e.trigger("resize", [n.width = t, n.height = r])
                    }),
                    e()
                }, o.delay)
            }()
        }
    }),
    "undefined" == typeof ZteFrameWork && getWaterInfo()
}
;
var iuiThrottleDelay, customAjax = function() {
    var o = {
        url: "",
        type: "GET",
        data: null,
        async: !1,
        success: !0,
        complete: !1
    };
    return function(r) {
        for (var e in o)
            r[e] = r[e] || o[e];
        var n = new XMLHttpRequest
          , t = r.url;
        n.open(r.type, t, r.async),
        n.onreadystatechange = function() {
            var e, t;
            4 == n.readyState && (e = n.status),
            (200 <= e && e < 300 || 304 == e) && (t = n.responseText,
            window.JSON && (t = JSON.parse(t)),
            e = t,
            t = "success",
            r.success && r.success(e, r, t, n),
            r.complete && r.complete(t))
        }
        ,
        "post" === r.type.toLowerCase() && n.setRequestHeader("Content-Type", "application/x-www-form-urlencode"),
        n.send(r.data)
    }
}(), iuiThrottleTimer = 0;
function iuiThrottle(r, n) {
    return function() {
        var e = arguments
          , t = +Date.now();
        n <= t - iuiThrottleTimer && (r.apply(this, e),
        iuiThrottleTimer = t)
    }
}
function iuiUserActionListener() {
    $.ajax({
        url: "/api/oauth2/v1/refreshsession",
        type: "get",
        success: function(e) {},
        error: function(e) {}
    })
}
top.iuiThrottle && top.iuiUserActionListener && (iuiThrottleDelay = 6e4,
window.addEventListener("mousemove", top.iuiThrottle(top.iuiUserActionListener, iuiThrottleDelay)),
window.addEventListener("keydown", top.iuiThrottle(top.iuiUserActionListener, iuiThrottleDelay)),
-1 != navigator.userAgent.indexOf("Firefox") ? window.addEventListener("DOMMouseScroll", top.iuiThrottle(top.iuiUserActionListener, iuiThrottleDelay)) : window.onmousewheel = document.onmousewheel = top.iuiThrottle(top.iuiUserActionListener, iuiThrottleDelay)),
document.addEventListener("mousedown", function() {
    top.ZteFrameWork && top.ZteFrameWork.removeSearchChildList && top.ZteFrameWork.removeSearchChildList()
});
